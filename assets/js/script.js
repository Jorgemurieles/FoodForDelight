var table=new DataTable("#myTable,#myTable2 ",{language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:" ",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStartsWith:"No empieza con",notEndsWith:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}}});function notify(e,t){var a='<div id="notify" class="'+(1==t?"success":2==t?"warning":"danger")+' animate__animated animate__fadeInDown">'+e+"</div>";$("#notify").remove(),$("body").append(a),setTimeout((function(){$("#notify").removeClass("animate__fadeInDown").addClass("animate__fadeOutUp")}),3500)}function coip(){$("#paymo").trigger("focus")}function minuIns(e){var t=$("#priceIns"+e).attr("data-price"),a=$("#cantInsInpt"+e).val()-1;if(0==a)return $("#trinsumesa"+e).remove(),sumTotalPerSingle(),void getStringData();var o=a*parseFloat(t).toFixed(2);$("#cantInsInpt"+e).val(a),$("#subTl"+e).text("$"+o).attr("data-subtl",o),sumTotalPerSingle(),getStringData()}function MaxIns(e){var t=$("#priceIns"+e).attr("data-price"),a=$("#cantInsInpt"+e).val(),o=parseInt(a)+1,n=o*parseFloat(t).toFixed(2);$("#cantInsInpt"+e).val(o),$("#subTl"+e).text("$"+n).attr("data-subtl",n),sumTotalPerSingle(),getStringData()}function openTable(e){$.ajax({type:"POST",url:baseurl+"ajax/request",data:"opentable="+e,beforeSend:function(){$("#loaderMesa").show()},success:function(e){window.location.href=baseurl+"mesa/"+e},error:function(){}})}function AddInsumoSingle(e,t){var a=$("#insumoName"+e).text(),o=$("#insumoPriceData"+e).attr("data-price"),n=1*parseFloat(o);if($("#trinsumesa"+e).length)MaxIns(e);else{var s='<tr id="trinsumesa'+e+'" class="trinsumolista"><td>'+a+'</td><td id="priceIns'+e+'" data-price="'+o+'">$'+o+'</td><td><div class="input-group mb-3"><button onclick="minuIns('+e+');" class="btn btn-sm btn-outline-danger"><i class="fa-thin fa-minus"></i></button><input id="cantInsInpt'+e+'" type="text" class="form-control text-center" value="1" disabled><button onclick="MaxIns('+e+');" class="btn btn-sm btn-outline-success"><i class="fa-thin fa-plus"></i></button></div></td><td class="text-center subtotalpro" id="subTl'+e+'" data-subtl="'+n+'">$'+n+'</td><td><div class="input-group mb-3"><input id="dtlins'+e+'" type="text" class="form-control" value=" "><button onclick="getStringData();" class="btn btn-sm btn-outline-info" type="button" id="button-addon2"><i class="fa-thin fa-floppy-disk-pen"></i></button></div></td><td class="text-center"><a class="recpt" data-status="false"><h4><i class="fa-thin fa-circle-xmark" style="color: #ef3636;"></i></h4></a></td></tr>';$("#insListTbody").append(s),$(".recpt").on("click",(function(){var e=$(this);"true"!=e.attr("data-status")&&(e.attr("data-status","true"),e.find("h4").html('<i class="fa-thin fa-circle-check" style="color: #c8ef36;"></i>'),getStringData())}))}sumTotalPerSingle(),getStringData()}function sumTotalPerSingle(){for(var e,t=$(".trinsumolista").length+1,a=null,o=1;o<t;o++)e=$(".trinsumolista:nth-child("+o+") .subtotalpro").attr("data-subtl"),a+=parseFloat(e);null==a?$(".totalsumh").text("$0"):$(".totalsumh").text("$"+a)}function saveTable(e,t){$.ajax({type:"POST",url:baseurl+"ajax/request",data:"savetable="+e+"&string="+t,success:function(e){},error:function(){}})}function getStringData(){for(var e=$(".trinsumolista").length+1,t="",a=1;a<e;a++){var o=$(".trinsumolista:nth-child("+a+")").attr("id").replace("trinsumesa",""),n=$("#cantInsInpt"+o).val(),s=$(".trinsumolista:nth-child("+a+") .recpt").attr("data-status"),i=$("#dtlins"+o).val();t+=o+"|"+n+"|"+("true"==s?2:1)+"|"+btoa(i)+","}var r=$("#mesaprime").val();console.log(t),saveTable(r,t)}function Cobrar(){var e=$("#paymo").val(),t=$(".totalsumh").text().replace("$",""),a=$("#mesaprime").val();if($("#paymo").prop("disabled",!0),$(".lds-spinner").show(),parseFloat(e)<parseFloat(t))return notify("<h4>El pago no puede ser menor al total de las ordenes.</h4>",3),$(".lds-spinner").hide(),void $("#paymo").prop("disabled",!1);if(parseFloat(e)==parseFloat(t))var o=0;else o=parseFloat(e)-parseFloat(t);if(isNaN(o))return notify("<h4>No puedes dejar el campo en blanco.</h4>",2),$(".lds-spinner").hide(),void $("#paymo").prop("disabled",!1);var n="mesapagosingle="+a+"&pc="+e;$.ajax({type:"POST",url:baseurl+"ajax/request",data:n,success:function(e){window.location.href=baseurl+"venta/"+e},error:function(){}})}function saveConfigData(){var e=$("#formConfigMod").serialize();$.ajax({type:"POST",url:baseurl+"ajax/request",data:e,beforeSend:function(){$("#formConfigMod").find("input").prop("disabled",!0)},success:function(e){1==e?notify("<strong>Todos los campos son obligatorios.</strong>",3):notify("Datos Guardados Correctamente.",1),$("#formConfigMod").find("input").prop("disabled",!1)},error:function(){}})}function createNewuser(){var e=$("#newUserForm").serialize();$.ajax({url:baseurl+"ajax/request",type:"post",data:e,beforeSend:function(){$("#newUserForm").find("input").prop("disabled",!0)},success:function(e){if(1==e)return notify("<strong>Todos los campos son obligatorios.</strong>",3),void $("#newUserForm").find("input").prop("disabled",!1);if(2==e)return notify("<strong>Este usuario ya esta en uso.</strong>",3),void $("#newUserForm").find("input").prop("disabled",!1);notify("Datos Guardados Correctamente.",1);var t=document.getElementById("staticNewUser");bootstrap.Modal.getInstance(t).hide(),setTimeout((function(){location.reload()}),2e3)}})}function editarUsuario(e){snd="UserTypeEdit="+e,$.ajax({url:baseurl+"ajax/request",type:"post",data:snd,success:function(e){$("#appdata").html(e),setTimeout((function(){new bootstrap.Modal(document.getElementById("staticEditUserModal")).show()}),500)}})}function DelFinishUser(e){snd="DelUserTypeEdit="+e,$.ajax({url:baseurl+"ajax/request",type:"post",data:snd,success:function(e){setTimeout((function(){new bootstrap.Modal(document.getElementById("staticBackDeleUser")).hide()}),500),setTimeout((function(){location.reload()}),600)}})}function SaveChangesUser(){var e=$("#newUserFormEdit").serialize();$.ajax({url:baseurl+"ajax/request",type:"post",data:e,beforeSend:function(){$("#newUserFormEdit").find("input").prop("disabled",!0)},success:function(e){if(1==e)return notify("<strong>Todos los campos son obligatorios.</strong>",3),void $("#newUserFormEdit").find("input").prop("disabled",!1);if(2==e)return notify("<strong>Este usuario ya esta en uso.</strong>",3),void $("#newUserFormEdit").find("input").prop("disabled",!1);notify("Datos Guardados Correctamente.",1);var t=document.getElementById("staticEditUserModal");bootstrap.Modal.getInstance(t).hide(),setTimeout((function(){location.reload()}),2e3)}})}function CreateNewCate(){sndCate=$("#cateFormNew").serialize(),$.ajax({url:baseurl+"ajax/request",type:"post",data:sndCate,success:function(e){if(1==e)return notify("<strong>Todos los campos son obligatorios.</strong>",3),void $("#newUserFormEdit").find("input").prop("disabled",!1);setTimeout((function(){notify("Datos Guardados Correctamente.",1),new bootstrap.Modal(document.getElementById("staticBackdrop")).hide(),location.reload()}),500)}})}function editCate(e){snd="UserCateEdit="+e,$.ajax({url:baseurl+"ajax/request",type:"post",data:snd,success:function(e){$("#appdata").html(e),setTimeout((function(){new bootstrap.Modal(document.getElementById("staticBackdropEdit")).show()}),500)}})}function SaveChangesCate(){sndCate=$("#cateFormNewEdit").serialize(),$.ajax({url:baseurl+"ajax/request",type:"post",data:sndCate,success:function(e){if(1==e)return notify("<strong>Todos los campos son obligatorios.</strong>",3),void $("#cateFormNewEdit").find("input").prop("disabled",!1);setTimeout((function(){notify("Datos Guardados Correctamente.",1),new bootstrap.Modal(document.getElementById("staticBackdropEdit")).hide(),location.reload()}),500)}})}function DelFinishCate(e){snd="DelCateTypeEdit="+e,$.ajax({url:baseurl+"ajax/request",type:"post",data:snd,success:function(e){setTimeout((function(){new bootstrap.Modal(document.getElementById("staticBackdropDeleteCate")).hide()}),500),setTimeout((function(){location.reload()}),600)}})}function createNewIn(){sndCate=$("#frmNewIns").serialize(),$.ajax({url:baseurl+"ajax/request",type:"post",data:sndCate,success:function(e){if(1==e)return notify("<strong>Todos los campos son obligatorios.</strong>",3),void $("#frmNewIns").find("input").prop("disabled",!1);setTimeout((function(){notify("Datos Guardados Correctamente.",1),new bootstrap.Modal(document.getElementById("staticBackdropNewInsumo")).hide(),location.reload()}),500)}})}function editInsu(e){snd="InsuEditData="+e,$.ajax({url:baseurl+"ajax/request",type:"post",data:snd,success:function(e){$("#appdata").html(e),setTimeout((function(){new bootstrap.Modal(document.getElementById("staticBackdropEditInsu")).show()}),500)}})}function saveInsuChangeData(){sndCate=$("#frmNewInsEditSave").serialize(),$.ajax({url:baseurl+"ajax/request",type:"post",data:sndCate,success:function(e){if(1==e)return notify("<strong>Todos los campos son obligatorios.</strong>",3),void $("#frmNewInsEditSave").find("input").prop("disabled",!1);setTimeout((function(){notify("Datos Guardados Correctamente.",1),new bootstrap.Modal(document.getElementById("staticBackdropEditInsu")).hide(),location.reload()}),500)}})}function DelFinishInsu(e){snd="DelInsuTypeEdit="+e,$.ajax({url:baseurl+"ajax/request",type:"post",data:snd,success:function(e){setTimeout((function(){new bootstrap.Modal(document.getElementById("staticBackdropInsuDel")).hide()}),500),setTimeout((function(){location.reload()}),600)}})}function hideAllInfo(){$("#printperTicket").hide(),$("#mesaPrintForm").hide(),$("#fomInfoPerUser").hide(),$("#ForminfoPerDate").hide()}function printTicketPerTicket(){snd=$("#printperTicket").serialize(),$.ajax({url:baseurl+"ajax/request",type:"post",data:snd,success:function(e){2==e?notify("No hay informacion sobre este ticket, revisa si esta correcto el folio.",3):window.open(e,"_blank"),$("#printperTicket")[0].reset()}})}function printTicketPerMesa(){snd=$("#mesaPrintForm").serialize(),$.ajax({url:baseurl+"ajax/request",type:"post",data:snd,success:function(e){window.open(e,"_blank")}})}function printInfoPerMesero(){snd=$("#fomInfoPerUser").serialize(),$.ajax({url:baseurl+"ajax/request",type:"post",data:snd,success:function(e){window.open(e,"_blank")}})}function printInfoPerFecha(){snd=$("#ForminfoPerDate").serialize(),$.ajax({url:baseurl+"ajax/request",type:"post",data:snd,success:function(e){window.open(e,"_blank")}})}function AllInfoDownload(){$.ajax({url:baseurl+"ajax/request",type:"post",data:"AllInfoDownload=1",success:function(e){window.open(e,"_blank")}})}function AllInfoDownloadPerDay(){$.ajax({url:baseurl+"ajax/request",type:"post",data:"AllInfoDownloadPerDay=1",success:function(e){window.open(e,"_blank")}})}$((function(){$("#datepicker").datepicker()})),$(".loginuser").on("click",(function(){var e=$("#formLogin").serialize();$.ajax({type:"POST",url:baseurl+"ajax/request",data:e,beforeSend:function(){$("#formLogin").find("input").prop("disabled",!0),$(".loginuser").prop("disabled",!0),$("#loader-login").show()},success:function(e){2==e?(notify("Inicio de sesión incorrecto, revisa tus datos de acceso.",3),setTimeout((function(){$("#formLogin").find("input").prop("disabled",!1),$("#formLogin")[0].reset(),$(".loginuser").prop("disabled",!1),$("#loader-login").hide()}),1500)):location.reload()},error:function(){}})})),$(".recpt").on("click",(function(){var e=$(this);"true"!=e.attr("data-status")&&(e.attr("data-status","true"),e.find("h4").html('<i class="fa-thin fa-circle-check" style="color: #c8ef36;"></i>'),getStringData())})),$(".chnIMGSite").on("click",(function(){$("#imagePersoSite").val(""),$("#imagePersoSite").click()})),$("#imagePersoSite").on("change",(function(){var e=new FormData($("#imageFormSite")[0]);$.ajax({url:baseurl+"ajax/request",type:"post",data:e,contentType:!1,processData:!1,beforeSend:function(){$(".chnIMGSite").prop("disabled",!0)},success:function(e){$(".chnIMGSite").prop("disabled",!1),$("#imagePersoSite").val(""),notify("Logo actualizado correctamente.",1),location.reload()}})})),$(".deluser").on("click",(function(){var e=$(this).attr("data-user");$("#FinisBtnDelUser").attr("onclick","DelFinishUser("+e+");")})),$(".delcate").on("click",(function(){var e=$(this).attr("data-cate");$("#FinisBtnDelCate").attr("onclick","DelFinishCate("+e+");")})),$(".delinsu").on("click",(function(){var e=$(this).attr("data-insu");$("#FinisBtnDelInsu").attr("onclick","DelFinishInsu("+e+");")})),$("#infobtns button").on("click",(function(){var e=$(this).attr("data-btn"),t=document.getElementById("staticBackdrop"),a=bootstrap.Modal.getInstance(t);1==e&&(hideAllInfo(),AllInfoDownload(),setTimeout((function(){a.hide()}),1e3)),5==e&&(hideAllInfo(),AllInfoDownloadPerDay(),setTimeout((function(){a.hide()}),1e3)),2==e&&(hideAllInfo(),$("#fomInfoPerUser").show()),3==e&&(hideAllInfo(),$("#ForminfoPerDate").show()),4==e&&(hideAllInfo(),$("#mesaPrintForm").show()),6==e&&(hideAllInfo(),$("#printperTicket").show())}));